"use strict";const e=require("../../common/vendor.js"),a=require("../../api/request.js"),n=require("../../utils/system.js"),t={__name:"personalCenter",setup(t){let i="";const u=e.ref({image:null,uuid:null,nickname:null});async function o(e){i=e.detail.avatarUrl,u.value.image=i}function l(e){u.value.nickname=e.target.value}async function c(){if(i){const e=await a.uploadFile(i,u.value.uuid),n=JSON.parse(e.data);if(console.log(n),0==n.code){const e=n.data.file.url;console.log(e),console.log(await a.GetUpdateTheImage(e))}}console.log(await a.GetUpnikname(u.value.nickname)),e.index.navigateBack({})}return e.onMounted((async()=>{if(e.cookies.get("x-token")){let e=await a.GetUserinfo();0==e.code&&(u.value.image=e.data.headPortrait,u.value.uuid=e.data.uuid,u.value.nickname=e.data.nickname),console.log(e)}else e.wx$1.login({success:async e=>{if(null!=e.code){let n=await a.GetLogin(e.code);console.log(n),u.value.image=n.data.user.headPortrait,u.value.uuid=n.data.user.uuid,u.value.nickname=n.data.user.nickname}}})})),(a,t)=>({a:e.unref(n.getNavBarheight)()+"px",b:u.value.image,c:e.o(o),d:e.o(l),e:u.value.nickname,f:e.o((e=>u.value.nickname=e.detail.value)),g:e.t(u.value.uuid),h:e.o(c)})}},i=e._export_sfc(t,[["__scopeId","data-v-327a0d7f"]]);t.__runtimeHooks=2,wx.createPage(i);
